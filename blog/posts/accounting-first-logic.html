<!DOCTYPE html>
<html lang="en">

<head>
    <title>The "Accounting-First" Logic | Singularity Insights</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <style>
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            line-height: 1.6;
        }

        .article-container {
            max-width: 800px;
            margin: auto;
            padding: 60px 20px;
        }

        header {
            border-bottom: 1px solid #30363d;
            margin-bottom: 40px;
            padding-bottom: 20px;
        }

        h1 {
            color: #58a6ff;
            font-weight: 700;
        }

        h2 {
            color: #58a6ff;
            border-bottom: 1px solid #30363d;
            padding-bottom: 10px;
            margin-top: 40px;
        }

        .meta {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .back-link {
            text-decoration: none;
            color: #58a6ff;
            display: block;
            margin-bottom: 20px;
        }

        code {
            background-color: #161b22;
            padding: 2px 5px;
            border-radius: 4px;
        }

        pre {
            border-radius: 6px;
        }

        blockquote {
            border-left: 4px solid #30363d;
            padding-left: 20px;
            color: #8b949e;
            font-style: italic;
            margin: 30px 0;
        }

        .author-box {
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 20px;
            margin-top: 60px;
            display: flex;
            align-items: center;
        }

        .author-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 20px;
        }
    </style>
</head>

<body>

    <div class="article-container">
        <a href="../index.html" class="back-link">← Back to Blog</a>

        <header>
            <div class="meta">FINANCIAL ARCHITECTURE • DEC 31, 2025</div>
            <h1>The "Accounting-First" Logic in Web Systems</h1>
            <p class="w3-large" style="color: #8b949e;">Why every business system should fundamentally be a ledger.</p>
        </header>

        <section class="content">
            <p>In 17 years of architecting enterprise systems, I've seen one recurring failure: systems that treat
                "money" as just another column in a database. When you're building for scale and auditability, money
                isn't a state—it's a history.</p>

            <blockquote>
                "If it's not in the ledger, it didn't happen."
            </blockquote>

            <h2>1. The "Tally" Approach</h2>
            <p>Most developers start by adding a <code>balance</code> field to a <code>users</code> table. This is the
                first step toward a reconciliation nightmare. A proper financial system focuses on the
                <strong>transaction log</strong>. The balance is merely the sum of all transactions.</p>

            <h2>2. Double-Entry Bookkeeping for Developers</h2>
            <p>Double-entry isn't just for accountants; it's a powerful pattern for data integrity. Every transaction
                must have at least one debit and one credit that balance out to zero. This ensures that money is never
                "created" or "destroyed" by a bug without leaving an obvious trail.</p>

            <pre><code class="language-php">// A simple ledger entry in Laravel
$transaction = Ledger::create([
    'description' => 'Service Payment',
    'amount' => '150.00',
]);

$transaction->entries()->createMany([
    ['account_id' => $customer_account, 'type' => 'debit', 'amount' => '150.00'],
    ['account_id' => $revenue_account, 'type' => 'credit', 'amount' => '150.00'],
]);</code></pre>

            <h2>3. The BCMath Non-Negotiable</h2>
            <p>Floating-point math is the enemy of financial accuracy. <code>0.1 + 0.2</code> is not <code>0.3</code> in
                the world of binary floats. In PHP, using <code>bcadd()</code>, <code>bcsub()</code>, and related
                functions is essential to maintain precision to the cent (or further).</p>

            <pre><code class="language-php">// Precision math for financial systems
$price = '19.99';
$tax_rate = '0.05';
$tax = bcmul($price, $tax_rate, 2); // '0.99'
$total = bcadd($price, $tax, 2);    // '20.98'</code></pre>

            <h2>4. Reconciliation Patterns</h2>
            <p>Automated reconciliation is the "secret sauce" of reliable platforms. Your system should constantly
                compare internal data with external sources (like Stripe or PayPal) and flag even a 1-cent discrepancy
                immediately.</p>
        </section>

        <div class="author-box">
            <img src="../../assets/images/amrshah.jpg" alt="Ali Raza" class="author-img">
            <div>
                <strong>Ali Raza (amrshah)</strong><br>
                <span class="w3-small" style="color: #8b949e;">Software Architect & Development Innovator</span>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</body>

</html>